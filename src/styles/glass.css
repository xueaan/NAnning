/* Glassmorphism surfaces driven by dynamic theme tokens */
:root {
  --glass-opacity: 0.22;
  --glass-blur: 18px;
  --glass-border-opacity: 0.18;
  --glass-shadow-strength: calc(var(--shadow-strength, 0.28) + 0.08);
}

body.theme-light {
  --glass-shadow-strength: calc(var(--shadow-strength, 0.18) + 0.04);
}

body.theme-dark {
  --glass-shadow-strength: calc(var(--shadow-strength, 0.36) + 0.16);
}

.glass {
  background: rgb(var(--background) / calc(var(--glass-opacity) + 0.32));
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid rgb(var(--border) / calc(var(--glass-border-opacity) + 0.12));
  box-shadow:
    0 20px 50px rgb(var(--shadow-color, 12 18 32) / calc(var(--glass-shadow-strength) + 0.14)),
    inset 0 1px 0 rgb(var(--foreground) / 0.08);
  color: inherit;
  transition:
    background 0.35s cubic-bezier(0.4, 0, 0.2, 1),
    border-color 0.35s cubic-bezier(0.4, 0, 0.2, 1),
    box-shadow 0.35s cubic-bezier(0.4, 0, 0.2, 1),
    transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

.glass-heavy {
  background: rgb(var(--background) / calc(var(--glass-opacity) + 0.44));
  border: 1px solid rgb(var(--border) / calc(var(--glass-border-opacity) + 0.18));
  box-shadow:
    0 26px 70px rgb(var(--shadow-color, 12 18 32) / calc(var(--glass-shadow-strength) + 0.22)),
    inset 0 1px 0 rgb(var(--foreground) / 0.1);
}

.glass-light {
  background: rgb(var(--background) / calc(var(--glass-opacity) + 0.18));
  border: 1px solid rgb(var(--border) / calc(var(--glass-border-opacity) + 0.06));
  box-shadow:
    0 12px 28px rgb(var(--shadow-color, 12 18 32) / calc(var(--glass-shadow-strength) + 0.08));
}

.glass-dark {
  background: rgb(0 0 0 / 0.32);
  border: 1px solid rgb(var(--border) / 0.2);
  box-shadow:
    0 18px 45px rgb(0 0 0 / 0.35);
}

.feather-glass {
  background: rgb(var(--background) / calc(var(--glass-opacity) + 0.3));
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid rgb(var(--border) / calc(var(--glass-border-opacity) + 0.12));
  box-shadow:
    0 18px 40px rgb(var(--shadow-color, 12 18 32) / var(--glass-shadow-strength)),
    inset 0 1px 0 rgb(var(--foreground) / 0.08);
  color: inherit;
  transition:
    background 0.35s cubic-bezier(0.4, 0, 0.2, 1),
    border-color 0.35s cubic-bezier(0.4, 0, 0.2, 1),
    box-shadow 0.35s cubic-bezier(0.4, 0, 0.2, 1),
    transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

.feather-glass-sidebar {
  backdrop-filter: blur(calc(var(--glass-blur) + 6px));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur) + 6px));
  background: linear-gradient(
    140deg,
    rgb(var(--background) / calc(var(--glass-opacity) + 0.38)) 0%,
    rgb(var(--background) / calc(var(--glass-opacity) + 0.28)) 100%
  );
  border-right: 1px solid rgb(var(--border) / calc(var(--glass-border-opacity) + 0.1));
  box-shadow:
    0 0 60px rgb(var(--shadow-color, 12 18 32) / calc(var(--glass-shadow-strength) + 0.18)),
    inset 0 1px 0 rgb(var(--foreground) / 0.06),
    inset 0 -1px 0 rgb(var(--foreground) / 0.04);
  color: rgb(var(--foreground) / 0.92);
}

.feather-glass-panel {
  backdrop-filter: blur(calc(var(--glass-blur) + 8px));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur) + 8px));
  background: linear-gradient(
    150deg,
    rgb(var(--background) / calc(var(--glass-opacity) + 0.42)) 0%,
    rgb(var(--background) / calc(var(--glass-opacity) + 0.32)) 100%
  );
  border: 1px solid rgb(var(--border) / calc(var(--glass-border-opacity) + 0.16));
  box-shadow:
    0 24px 64px rgb(var(--shadow-color, 12 18 32) / calc(var(--glass-shadow-strength) + 0.22)),
    inset 0 1px 0 rgb(var(--foreground) / 0.08);
  color: rgb(var(--foreground) / 0.94);
}

.feather-glass-deco {
  backdrop-filter: blur(calc(var(--glass-blur) - 6px));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur) - 6px));
  background: rgb(var(--background) / calc(var(--glass-opacity) + 0.18));
  border: 1px solid rgb(var(--border) / calc(var(--glass-border-opacity) + 0.05));
  box-shadow: 0 12px 28px rgb(var(--shadow-color, 12 18 32) / calc(var(--glass-shadow-strength) + 0.12));
}

.feather-glass-hover {
  transition: inherit;
}

.feather-glass-hover:hover {
  background: rgb(var(--background) / calc(var(--glass-opacity) + 0.5));
  border-color: rgb(var(--primary) / 0.4);
  box-shadow:
    0 20px 48px rgb(var(--shadow-color, 12 18 32) / calc(var(--glass-shadow-strength) + 0.26)),
    0 0 32px rgb(var(--primary) / 0.3);
  transform: translateY(-2px);
}

.feather-glass-active {
  background: linear-gradient(
    135deg,
    color-mix(in srgb, rgb(var(--primary) / 1) 70%, transparent) 0%,
    color-mix(in srgb, rgb(var(--secondary) / 1) 55%, rgb(var(--accent) / 1) 45%) 100%
  );
  border-color: rgb(var(--primary) / 0.6);
  box-shadow:
    0 0 32px rgb(var(--primary) / 0.45),
    inset 0 1px 0 rgb(var(--foreground) / 0.12);
  color: rgb(var(--foreground) / 1);
}

body.theme-light .feather-glass,
body.theme-light .feather-glass-panel,
body.theme-light .feather-glass-sidebar {
  box-shadow:
    0 18px 42px rgb(var(--shadow-color, 32 38 68) / calc(var(--glass-shadow-strength) + 0.1)),
    inset 0 1px 0 rgb(var(--foreground) / 0.06);
}

body.theme-light .feather-glass-active {
  border-color: rgb(var(--primary) / 0.5);
  box-shadow:
    0 0 24px rgb(var(--primary) / 0.32),
    inset 0 1px 0 rgb(var(--foreground) / 0.08);
}

.feather-glass-shimmer {
  background: linear-gradient(
    105deg,
    transparent 38%,
    rgba(255, 255, 255, 0.18) 50%,
    transparent 62%
  );
  background-size: 200% 100%;
  animation: glass-shimmer 3s ease-in-out infinite;
  mix-blend-mode: screen;
}

@keyframes glass-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@media (prefers-reduced-motion: reduce) {
  .feather-glass,
  .feather-glass-hover,
  .feather-glass-panel,
  .feather-glass-sidebar {
    transition: none;
  }

  .feather-glass-shimmer {
    animation: none;
  }
}
